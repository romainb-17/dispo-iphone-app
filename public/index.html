<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>dispo-iphone-app â€” Dispo Apple</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:24px}
    header{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:16px}
    h1{font-size:20px;margin:0}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
    select,input,button{padding:8px 10px;border:1px solid #ddd;border-radius:10px}
    button{cursor:pointer}
    table{width:100%;border-collapse:separate;border-spacing:0;margin-top:12px}
    th,td{padding:10px 12px;border-bottom:1px solid #eee;text-align:left}
    tr:hover{background:#fafafa}
    .ok{color:#0a7d00;font-weight:600}
    .ko{color:#b00020;font-weight:600}
    .muted{color:#666}
    .sku{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet.9.4/dist/leaflet.js"></script>
  <style id="map-fix-css">#map{height:60vh;min-height:420px;width:100%;border-radius:12px;overflow:hidden}</style>
  <style id="leaflet-hotfix-css">
    #map{height:60vh;min-height:420px;width:100%;border-radius:12px;overflow:hidden;position:relative}
    .leaflet-container img{max-width:none !important;} /* neutralise img{max-width:100%} */
    .leaflet-pane img.leaflet-tile{display:block}       /* Ã©vite les espaces entre tuiles     */
  </style>
</head>
<body>
  <header><h1>ðŸ“¦ Dispo iPhone (Apple Stores)</h1></header>

  <div class="row">
    <label>ModÃ¨le
      <select id="model"><option value="">â€” choisir â€”</option></select>
    </label>
    <label>Couleur
      <select id="color" disabled><option value="">â€” choisir â€”</option></select>
    </label>
    <label>CapacitÃ©
      <select id="capacity" disabled><option value="">â€” choisir â€”</option></select>
    </label>
    <span class="muted">SKU: <span id="sku" class="sku">(aucun)</span></span>
  </div>

  <div class="row">
    <label>Pays
      <select id="country"><option>fr</option><option>be</option><option>ch</option><option>es</option><option>de</option><option>uk</option><option>us</option></select>
    </label>
    <label>Localisation (CP/ville ou lat,long)
      <input id="location" placeholder="17000 ou 48.85,2.35" value="17000">
    </label>
    <label>Store RXXX (optionnel)
      <input id="store" placeholder="R123" style="width:80px">
    </label>
    <button id="go">Rechercher</button>
  </div>

  <table>
    <thead><tr><th>Store</th><th>Ville</th><th>Distance</th><th>SKU</th><th>Dispo</th><th>Quote</th></tr></thead>
    <tbody id="tbody"></tbody>
  </table>

  <div id="map" style="height:480px;margin-top:14px;border-radius:12px;overflow:hidden;"></div>
  <script type="module" src="./ui-map.js"></script>
  <script type="module" src="./ui-model-fallback.js"></script>
</body>
</html>
